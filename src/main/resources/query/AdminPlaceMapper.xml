<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.fly.admin.place.dao.AdminPlaceDao">

	<!-- 구장 리스트 -->
	<!-- 폐업 -2, 임시휴업 -1, 운영전 0, 운영중 1, 전체 2 -->
	<!-- 구장명 검색 -->
	<select id="adminPlaceList" parameterType="HashMap" resultType="place">
		select m_id, p_ceo, p_name, p_ok, to_char(p_regdate, 'yyyy/MM/dd') p_regdate, p_num
		from place		
		<where>
			<if test='status != "2"'>
				p_status = #{status}
			</if>
		</where>
		<where>
			<if test='name != "null"'>
				<![CDATA[
				p_name like '%'||#{name}||'%'
				]]>
			</if>
		</where>
	</select>
	
	<select id="stadiumCnt" resultType="int" parameterType="String">
		select count(*)
		from stadium
		where p_num = #{p_num} and s_status = 0
	</select>
	
</mapper>